===============================
Getting Started with Chephren
===============================

Here's a quick guide to using Chephren to manage a blog.

Configuring Chephren
==========================

To utilize Chephren's capabilities you must add Chephren's website extension
to Sphinx. It is also strongly recommended that you set the `primary_domain`
to "blog" to make it the default namespace for directives and roles. All
examples in the documentation assume you have done that. Finally, ensure that
the `html_domain_indices` setting is set to a true value, or else you will get
no archive pages! ::

    extensions = [
        'chephren.website',
    ]
    primary_domain = 'blog'
    html_domain_indices = True

Creating Blog Posts
==========================

Use the ``blogpost`` directive in any document to make it a blog post.

.. rst:directive:: .. blogpost:: YYYY-MM-DD

    Marks the document as a blog post to be added to the chronological index.
    The date argument must be in :RFC:`3339` format (the One True Date
    Format). If desired, you may also include a time component.

You can add categories or tags to your blog post by passing them as options
to the ``blogpost`` directive. ::

    .. blogpost:: 2015-03-17
        :category: Holidays
        :tags: St. Patrick's Day

To define a description or summary to be used in your feed, in search results,
and in social media posts, include the description as content in the
``blogpost`` directive. ::

    .. blogpost:: 2015-03-17
        :category: Holidays
        :tags: St. Patrick's Day

        How do you make green beer for St. Patrick's Day? Read this post to
        find out!

Creating Category Pages and Date Archive Pages
====================================================

Chephren uses Sphinx's indexing mechanism to generate archive pages. They will
be created automatically as long as the setting ``html_domain_indices`` is set
to a true value. To control which kinds of archive pages to generate, set
``html_domain_indices`` to a list of the ones you want.

In the first Chephren release, there is only one index page per index. This
means that you won't get traditional category pages with one category per
page. Instead, you'll get a single page with all posts by category. This is
because Sphinx does not honor the ``html_split_index`` setting for domain
indexes by default. Splitting domain indexes, and thus individual category
pages, will be supported in a future release of Chephren.

The indexes are rendered using the ``domainindex.html`` template, which you
can override in your theme. However, you may want to postpone any
customizations until split indexes are supported.

Linking to Posts, Category and Date Archive Pages
====================================================

.. rst:role:: blogpost

    To link to a post, use the blogpost role.

::

    Read :blogpost:`first-post` for all the juicy details!

.. rst:role:: archive

    To link to a Category or Date Archive page, use the archive role.

::

    See a list of all my posts in :archive:`the Date Archive <blog-bydate>`.

Creating a Site RSS Feed
====================================================

A site feed will be generated by default. To suppress it, set
``feed_filename`` to an empty string or ``None``.

To adjust the number of items included in the feed, set ``max_feed_items``.
The default is to include all blogposts. Feed pagination is not supported in
the first release of Chephren.

By default, the feed includes title and description, but not the full content
of the blogpost. To include full content as well, set ``feed_content`` to a
true value.
